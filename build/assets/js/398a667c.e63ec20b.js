"use strict";(self.webpackChunkk_3_s=self.webpackChunkk_3_s||[]).push([[200],{5647:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>h,contentTitle:()=>i,default:()=>c,frontMatter:()=>a,metadata:()=>r,toc:()=>d});var s=n(5893),o=n(1151);const a={sidebar_position:8,sidebar_label:"Auto Healing"},i=void 0,r={id:"Auto-healing",title:"Auto-healing",description:"Auto healing demo",source:"@site/docs/Auto-healing.md",sourceDirName:".",slug:"/Auto-healing",permalink:"/Auto-healing",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:8,frontMatter:{sidebar_position:8,sidebar_label:"Auto Healing"},sidebar:"tutorialSidebar",previous:{title:"Basic Auth",permalink:"/Basic-auth"},next:{title:"Persistant storage with localstorage and longhorn",permalink:"/Persistent-Storage-Longhorn"}},h={},d=[{value:"Auto healing demo",id:"auto-healing-demo",level:2},{value:"Deploy ghost",id:"deploy-ghost",level:4},{value:"Make edits",id:"make-edits",level:4},{value:"Delete the pod",id:"delete-the-pod",level:4}];function l(e){const t={a:"a",code:"code",h2:"h2",h4:"h4",p:"p",pre:"pre",strong:"strong",...(0,o.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h2,{id:"auto-healing-demo",children:"Auto healing demo"}),"\n",(0,s.jsx)(t.p,{children:"Lets see some reasons why we are using kubernetes in the first place. We will use the blogging platform ghost because it is fast an easy to deploy and work with."}),"\n",(0,s.jsx)(t.h4,{id:"deploy-ghost",children:"Deploy ghost"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"cat ghost-ephemeral.yaml | envsubst | kubectl apply -f -\n"})}),"\n",(0,s.jsx)(t.h4,{id:"make-edits",children:"Make edits"}),"\n",(0,s.jsxs)(t.p,{children:["If you now go to ",(0,s.jsx)("a",{href:"https://ghost.yourdomain.com",target:"blank",children:(0,s.jsx)(t.a,{href:"https://ghost.yourdomain.com",children:"https://ghost.yourdomain.com"})})," (wait a few seconds for the certificate to be claimed), you should see ghost startpage. Go to ",(0,s.jsx)("a",{href:"https://ghost.yourdomain.com/ghost",target:"blank",children:(0,s.jsx)(t.a,{href:"https://ghost.yourdomain.com/ghost",children:"https://ghost.yourdomain.com/ghost"})})," and create an account. Make some changes. Go back to the site and see the changes."]}),"\n",(0,s.jsx)(t.h4,{id:"delete-the-pod",children:"Delete the pod"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"kubectl get pods\n\nNAME                     READY   STATUS    RESTARTS   AGE\necho1-68949fd997-4g9k4   1/1     Running   0          20m\necho1-68949fd997-tqwwp   1/1     Running   0          20m\nghost-548879c755-bxvrx   1/1     Running   0          6m26s\n"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"kubectl delete pod ghost-548879c755-bxvrx\n"})}),"\n",(0,s.jsx)(t.p,{children:"Wait for a few seconds an check again."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"kubectl get pods\n\nNAME                     READY   STATUS    RESTARTS   AGE\necho1-68949fd997-4g9k4   1/1     Running   0          22m\necho1-68949fd997-tqwwp   1/1     Running   0          22m\nghost-548879c755-zfffk   1/1     Running   0          14s\n\n"})}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Yes!"})," It just recreates it self. This is one of the great things with kubernetes. Even if this pod was running on a VPS that just died, it would be recreated on a different VPS (as long as you have multiple ones, of course)."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"No!"})," The changes we made are lost! This is a brand new pod, and the data we saved has been deleted. Read the part about persistant storage to see more about how we can deal with this."]})]})}function c(e={}){const{wrapper:t}={...(0,o.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},1151:(e,t,n)=>{n.d(t,{Z:()=>r,a:()=>i});var s=n(7294);const o={},a=s.createContext(o);function i(e){const t=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),s.createElement(a.Provider,{value:t},e.children)}}}]);