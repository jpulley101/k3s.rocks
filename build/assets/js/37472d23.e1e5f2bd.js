"use strict";(self.webpackChunkk_3_s=self.webpackChunkk_3_s||[]).push([[244],{3231:(e,s,a)=>{a.r(s),a.d(s,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>d,toc:()=>c});var t=a(5893),n=a(1151);const i={sidebar_position:7,sidebar_label:"Basic Auth"},r=void 0,d={id:"Basic-auth",title:"Basic-auth",description:"Basic auth",source:"@site/docs/Basic-auth.md",sourceDirName:".",slug:"/Basic-auth",permalink:"/Basic-auth",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7,sidebar_label:"Basic Auth"},sidebar:"tutorialSidebar",previous:{title:"Traefik",permalink:"/traefik-dashboard"},next:{title:"Auto Healing",permalink:"/Auto-healing"}},l={},c=[{value:"Basic auth",id:"basic-auth",level:2},{value:"Credentials",id:"credentials",level:2},{value:"Middleware",id:"middleware",level:2},{value:"Add Middleware",id:"add-middleware",level:2},{value:"Traefik Ingressroute",id:"traefik-ingressroute",level:3},{value:"Ingress",id:"ingress",level:3},{value:"Test it",id:"test-it",level:2},{value:"Rotate credentials (Optional but smart)",id:"rotate-credentials-optional-but-smart",level:2}];function o(e){const s={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",...(0,n.a)(),...e.components},{Details:i}=s;return i||function(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h2,{id:"basic-auth",children:"Basic auth"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"Basic auth",src:a(2039).Z+"",width:"359",height:"142"})}),"\n",(0,t.jsxs)(s.p,{children:["Without any authentication all ingresses are unprotected, unless they offer their own auth. One easy way to add some security to this is using basic auth. This wil also allow us to secure the private registry easily if we use one. All with the same credentials. See the ",(0,t.jsx)(s.a,{href:"https://doc.traefik.io/traefik/middlewares/basicauth/",children:"docs"})," for more details."]}),"\n",(0,t.jsx)(s.h2,{id:"credentials",children:"Credentials"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"cat basic-auth-secret.yaml | envsubst | kubectl apply -f -\n"})}),"\n",(0,t.jsxs)(i,{children:[(0,t.jsx)("summary",{children:"basic-auth-secret.yaml"}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:'--8<-- "./manifests/basic-auth-secret.yaml"\n'})})]}),"\n",(0,t.jsx)(s.h2,{id:"middleware",children:"Middleware"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"cat basic-auth-middleware.yaml | envsubst | kubectl apply -f -\n"})}),"\n",(0,t.jsxs)(i,{children:[(0,t.jsx)("summary",{children:"basic-auth-middleware.yaml"}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:'--8<-- "./manifests/basic-auth-middleware.yaml"\n'})})]}),"\n",(0,t.jsx)(s.h2,{id:"add-middleware",children:"Add Middleware"}),"\n",(0,t.jsx)(s.p,{children:"Depending on if you are using Ingressroute or Ingress you can add the middleware."}),"\n",(0,t.jsx)(s.h3,{id:"traefik-ingressroute",children:"Traefik Ingressroute"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"cat traefik-ingressroute.yaml | envsubst | kubectl apply -f -\n"})}),"\n",(0,t.jsxs)(i,{children:[(0,t.jsx)("summary",{children:"traefik-ingressroute.yaml"}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:'--8<-- "./manifests/traefik-ingressroute.yaml"\n'})})]}),"\n",(0,t.jsx)(s.h3,{id:"ingress",children:"Ingress"}),"\n",(0,t.jsx)(s.p,{children:"**Note: ** The middleware is prefixed with the namespace, in this case default."}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"cat traefik-dashboard-ingress-basic-auth.yaml | envsubst | kubectl apply -f -\n"})}),"\n",(0,t.jsxs)(i,{children:[(0,t.jsx)("summary",{children:"traefik-dashboard-ingress-basic-auth.yaml"}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:'--8<-- "./manifests/traefik-dashboard-ingress-basic-auth.yaml"\n'})})]}),"\n",(0,t.jsx)(s.h2,{id:"test-it",children:"Test it"}),"\n",(0,t.jsxs)(s.p,{children:["Access ",(0,t.jsx)("a",{href:"https://traefik.yourdomain.com",target:"_blank",children:(0,t.jsx)(s.a,{href:"https://traefik.yourdomain.com",children:"https://traefik.yourdomain.com"})})," and see that it now needs username and password. The combination is test/test."]}),"\n",(0,t.jsx)(s.h2,{id:"rotate-credentials-optional-but-smart",children:"Rotate credentials (Optional but smart)"}),"\n",(0,t.jsx)(s.p,{children:"These credentials may not be the best, so lets try to rotate them."}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"htpasswd -c mynewcreds user1\n# enter and reenter password\nhtpasswd mynewcreds user2\n#enter and reenter password\nhtpasswd mynewcreds user3\n#enter and reenter password*\ncat mynewcreds | base64 > mynewcreds64\ncat <<EOF | kubectl apply -f -\napiVersion: v1\nkind: Secret\nmetadata:\n  name: my-basic-auth-secret\n  namespace: default\ndata:\n  users: |2\n    $(head -1 mynewcreds64 | tail -1)\n    $(head -2 mynewcreds64 | tail -1)\n    $(head -3 mynewcreds64 | tail -1)\nEOF\n"})})]})}function h(e={}){const{wrapper:s}={...(0,n.a)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},2039:(e,s,a)=>{a.d(s,{Z:()=>t});const t="data:image/webp;base64,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"},1151:(e,s,a)=>{a.d(s,{Z:()=>d,a:()=>r});var t=a(7294);const n={},i=t.createContext(n);function r(e){const s=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),t.createElement(i.Provider,{value:s},e.children)}}}]);