"use strict";(self.webpackChunkk_3_s=self.webpackChunkk_3_s||[]).push([[521],{3438:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>r,contentTitle:()=>o,default:()=>g,frontMatter:()=>l,metadata:()=>s,toc:()=>d});var i=a(5893),t=a(1151);const l={sidebar_position:12,sidebar_label:"Logging"},o="Logging",s={id:"logging",title:"Logging",description:"Since we already are relying on grafana for metrics, it is conveniant to use Loki for logging.",source:"@site/docs/logging.md",sourceDirName:".",slug:"/logging",permalink:"/logging",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:12,frontMatter:{sidebar_position:12,sidebar_label:"Logging"},sidebar:"tutorialSidebar",previous:{title:"Metrics",permalink:"/metrics"},next:{title:"ArgoCD",permalink:"/Argocd"}},r={},d=[{value:"Install loki",id:"install-loki",level:3},{value:"Add Loki as datasource",id:"add-loki-as-datasource",level:3},{value:"1. Add it manually in the grafana UI",id:"1-add-it-manually-in-the-grafana-ui",level:4},{value:"2. Add it using a configmap",id:"2-add-it-using-a-configmap",level:4}];function c(e){const n={a:"a",code:"code",h1:"h1",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"logging",children:"Logging"}),"\n",(0,i.jsxs)(n.p,{children:["Since we already are relying on grafana for metrics, it is conveniant to use Loki for logging.\n",(0,i.jsx)(n.img,{alt:"Loki",src:a(20).Z+"",width:"1828",height:"939"})]}),"\n",(0,i.jsx)(n.h3,{id:"install-loki",children:"Install loki"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"helm repo add grafana https://grafana.github.io/helm-charts && \\\nhelm repo update && \\\nhelm upgrade --install loki grafana/loki-stack  \n"})}),"\n",(0,i.jsx)(n.h3,{id:"add-loki-as-datasource",children:"Add Loki as datasource"}),"\n",(0,i.jsx)(n.p,{children:"The helm chart installation should? have added loki as a datasource to grafana, but in case it is not there, we have two alternatives."}),"\n",(0,i.jsx)(n.h4,{id:"1-add-it-manually-in-the-grafana-ui",children:"1. Add it manually in the grafana UI"}),"\n",(0,i.jsxs)(n.p,{children:['Configuration > "Add Datasource" > Loki > "url: ',(0,i.jsx)(n.a,{href:"http://loki:3100",children:"http://loki:3100"}),'" > "Save & Test"']}),"\n",(0,i.jsx)(n.h4,{id:"2-add-it-using-a-configmap",children:"2. Add it using a configmap"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Add the configmap"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl apply -f loki-datasource.yaml\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Restart the deployment"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl rollout restart deployment prometheus-stack-grafana\n"})}),"\n",(0,i.jsx)(n.p,{children:'Go to "Explore" > "Loki" to start exploring'})]})}function g(e={}){const{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},20:(e,n,a)=>{a.d(n,{Z:()=>i});const i=a.p+"assets/images/loki-2263019ebe108ec1c0b9e5933a2f14a3.webp"},1151:(e,n,a)=>{a.d(n,{Z:()=>s,a:()=>o});var i=a(7294);const t={},l=i.createContext(t);function o(e){const n=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);